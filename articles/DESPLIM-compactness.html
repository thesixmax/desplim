<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Creating DESPLIM compactness • desplim</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Creating DESPLIM compactness">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">desplim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/DESPLIM-compactness.html">Creating DESPLIM compactness</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Creating DESPLIM compactness</h1>
            
      

      <div class="d-none name"><code>DESPLIM-compactness.Rmd</code></div>
    </div>

    
    
<p>As part of the DESPLIM package, a custom compactness metric has been
developed based on the paper by <a href="https://doi.org/10.1111/ajps.12603" class="external-link">Kaufman et al (2021)</a>. This
vignette summarises the key steps in the creation of this metric,
utilising their <a href="https://doi.org/10.7910/DVN/FA8FVF" class="external-link">replication
data</a>, <a href="https://cran.r-project.org/web/packages/xgboost/index.html" class="external-link">XGBoost</a>
and the <a href="https://www.tidymodels.org/" class="external-link">tidyverse</a>
framework.</p>
<div class="section level2">
<h2 id="setup-and-data">Setup and data<a class="anchor" aria-label="anchor" href="#setup-and-data"></a>
</h2>
<p>The paper by <a href="https://doi.org/10.1111/ajps.12603" class="external-link">Kaufman et
al (2021)</a> employs a novel method to determine a quantitative metric
for legislative district compactness designed to replicate the intuitive
“you know it when you see it” standard which is often cited in law. The
resulting metric is the output of a statistical model trained to predict
human rankings of district shapes based on different geometric district
features. Overall, it shows promising results for accurately predicting
how diverse groups intuitively judge a district’s compactness based
solely on well-known geometric features.</p>
<p>We found it relevant to include a similar compactness metric in this
package, not only as a replication exercise, but because it fits very
well into the overall objective of having a deterministic algorithm to
split-merge larger districts. However, since the compactness metric will
be calculated thousands, if not millions, of times during more complex
split-merge problems, we found it natural to rely on a single model file
and very fast implementations of the calculation of typical geometrical
district features. To obtain this goal, we have implemented a simple
XGBoost model as described below, based on the excellent replication
data provided by Kaufman et al.</p>
<p>To start, we install and load packages used for both modelling and
diagnostics:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://thesixmax.github.io/desplim/">desplim</a></span><span class="op">)</span> <span class="co"># contains cleaned training data</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidymodels.tidymodels.org" class="external-link">tidymodels</a></span><span class="op">)</span> <span class="co"># preferred modelling framework</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/dmlc/xgboost" class="external-link">xgboost</a></span><span class="op">)</span> <span class="co"># model engine</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://modeloriented.github.io/DALEX/" class="external-link">DALEX</a></span><span class="op">)</span> <span class="co"># model checks and diagnostics</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ModelOriented.github.io/DALEXtra/" class="external-link">DALEXtra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://doFuture.futureverse.org" class="external-link">doFuture</a></span><span class="op">)</span> <span class="co"># parallel processing</span></span>
<span><span class="fu"><a href="https://doFuture.futureverse.org/reference/registerDoFuture.html" class="external-link">registerDoFuture</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">multisession</span>, workers <span class="op">=</span> <span class="fu">parallel</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/parallel/detectCores.html" class="external-link">detectCores</a></span><span class="op">(</span>logical <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>tidymodels.dark <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># for those of us who love a good dark theme</span></span></code></pre></div>
<p>It is important to note that parallel computation is of course
completely optional, but does speed up the model tuning process. Next,
we can get a quick glance of the cleaned training data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">desplim_compactness_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;     compact     boyce box_reock      hull   len_wid    polsby     reock</span></span>
<span><span class="co">#&gt; 1 0.0300000 0.7649550 0.4896064 0.6262075 0.7534825 0.1145953 0.4057489</span></span>
<span><span class="co">#&gt; 2 0.2745098 0.7775373 0.4381054 0.6984327 0.8969073 0.2021440 0.3742773</span></span>
<span><span class="co">#&gt; 3 0.1300000 0.8304922 0.4871881 0.6415116 0.8888942 0.1258987 0.3280131</span></span>
<span><span class="co">#&gt; 4 0.1400000 0.8341214 0.4310280 0.6125937 0.6679481 0.1873192 0.3345650</span></span>
<span><span class="co">#&gt; 5 0.0100000 0.7016934 0.4300677 0.5800668 0.9635191 0.1019103 0.4143697</span></span>
<span><span class="co">#&gt; 6 0.1176471 0.8371308 0.3508467 0.5589451 0.3416772 0.1458956 0.1486579</span></span>
<span><span class="co">#&gt;    schwartz      skew     sym_x     sym_y</span></span>
<span><span class="co">#&gt; 1 0.3385193 0.2822636 0.6494468 0.5977191</span></span>
<span><span class="co">#&gt; 2 0.4496043 0.4190817 0.6090472 0.6896901</span></span>
<span><span class="co">#&gt; 3 0.3548220 0.2738264 0.5287228 0.5271888</span></span>
<span><span class="co">#&gt; 4 0.4328039 0.3005736 0.4305575 0.3530961</span></span>
<span><span class="co">#&gt; 5 0.3192339 0.2754020 0.4761292 0.4987708</span></span>
<span><span class="co">#&gt; 6 0.3819629 0.1683645 0.6358400 0.4629123</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html" class="external-link">hist</a></span><span class="op">(</span><span class="va">desplim_compactness_data</span><span class="op">$</span><span class="va">compact</span><span class="op">)</span></span></code></pre></div>
<p><img src="DESPLIM-compactness_files/figure-html/explore-data-1.png" width="700"></p>
<p>More details on the data can be found in the <a href="?desplim_compactness_data">associated data documentation</a>. In
short, the data processing consists of three steps:</p>
<ul>
<li><p>Merge the original district shape files with the human-assigned
compactness scores from replication data.</p></li>
<li><p>For each district, compute 10 different geometrical features
using <a href="https://alarm-redist.org/redistmetrics/" class="external-link">redistmetrics</a>.</p></li>
<li><p>Rescale the compactness score to be between 0 (lowest
compactness) to 1 (highest compactness).</p></li>
</ul>
<p>The resulting data consists of 558 districts. As shown in the plot,
the training data contains a close to uniform distribution of
compactness, which is essential for any model to learn the full range of
possible compactness scores. Also, the data snippet does not reveal an
obvious correlation between compactness and any single geometrical
feature.</p>
<p>Next, the data is split into training data (80%) and test data (20%),
and a simple recipe with no processing steps is created.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">123</span><span class="op">)</span></span>
<span><span class="co"># Data split</span></span>
<span><span class="va">data_split</span> <span class="op">&lt;-</span> <span class="fu">initial_split</span><span class="op">(</span><span class="va">desplim_compactness_data</span>, prop <span class="op">=</span> <span class="fl">0.8</span>, strata <span class="op">=</span> <span class="va">compact</span><span class="op">)</span></span>
<span><span class="va">train_data</span> <span class="op">&lt;-</span> <span class="fu">training</span><span class="op">(</span><span class="va">data_split</span><span class="op">)</span></span>
<span><span class="va">test_data</span> <span class="op">&lt;-</span> <span class="fu">testing</span><span class="op">(</span><span class="va">data_split</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Recipe</span></span>
<span><span class="va">model_recipe</span> <span class="op">&lt;-</span> <span class="fu">recipe</span><span class="op">(</span><span class="va">compact</span> <span class="op">~</span> <span class="va">.</span>, data <span class="op">=</span> <span class="va">train_data</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="model-specification-and-tuning">Model specification and tuning<a class="anchor" aria-label="anchor" href="#model-specification-and-tuning"></a>
</h2>
<p>To model the compactness score, we have employed the ever-so-popular
XGBoost algorithm. Within the tidyverse framework, we have the option to
tune the model parameters as we see fit. For more information, the
documentation on the <a href="https://tune.tidymodels.org/index.html" class="external-link">tune package</a> comes in
handy. In this case, since the dataset is small and we do not need to
worry about computational issues, it is reasonable to tune all standard
model parameters. For the parameter specification, we can apply the
defaults provided by the <a href="https://dials.tidymodels.org/" class="external-link">dials
package</a>.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># XGBoost specification</span></span>
<span><span class="va">xgb_spec</span> <span class="op">&lt;-</span> <span class="fu">boost_tree</span><span class="op">(</span></span>
<span>  trees <span class="op">=</span> <span class="fu">tune</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  tree_depth <span class="op">=</span> <span class="fu">tune</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  learn_rate <span class="op">=</span> <span class="fu">tune</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  mtry <span class="op">=</span> <span class="fu">tune</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  min_n <span class="op">=</span> <span class="fu">tune</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  loss_reduction <span class="op">=</span> <span class="fu">tune</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  sample_size <span class="op">=</span> <span class="fu">tune</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">set_engine</span><span class="op">(</span></span>
<span>    <span class="st">"xgboost"</span>,</span>
<span>    objective <span class="op">=</span> <span class="st">"reg:squarederror"</span>,</span>
<span>    verbose <span class="op">=</span> <span class="fl">0</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">set_mode</span><span class="op">(</span><span class="st">"regression"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># XGBoost parameter specification</span></span>
<span><span class="va">xgb_params</span> <span class="op">&lt;-</span> <span class="fu">parameters</span><span class="op">(</span></span>
<span>  <span class="fu">trees</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="fu">tree_depth</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="fu">learn_rate</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="fu">finalize</span><span class="op">(</span><span class="fu">mtry</span><span class="op">(</span><span class="op">)</span>, <span class="va">train_data</span><span class="op">)</span>,</span>
<span>  <span class="fu">min_n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="fu">loss_reduction</span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="fu">sample_prop</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Before tuning the model, we will need to put the model recipe and the
model specifications into a workflow. Finally, we also define a 10-fold
cross-validation for each iteration. Even though e.g. 5-fold
cross-validation would most likely be more than sufficient in our case,
we do not have to worry about computing time, especially when utilising
parallel processing.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Workflow</span></span>
<span><span class="va">xgb_workflow</span> <span class="op">&lt;-</span> <span class="fu">workflow</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">add_recipe</span><span class="op">(</span><span class="va">model_recipe</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">add_model</span><span class="op">(</span><span class="va">xgb_spec</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Cross validation</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">456</span><span class="op">)</span></span>
<span><span class="va">cv_folds</span> <span class="op">&lt;-</span> <span class="fu">vfold_cv</span><span class="op">(</span><span class="va">train_data</span>, v <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>Tuning time! For this model, we apply Bayesian tuning. Compared to
e.g. brute-force grid search, which tests every combination of a
predefined set of parameters, Bayesian tuning applies an adaptive
strategy based on probabilistic models to search the most promising
areas of the parameter space. RMSE (root mean squared error) is used for
model comparison and evaluation.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">789</span><span class="op">)</span></span>
<span><span class="va">tune_results</span> <span class="op">&lt;-</span> <span class="fu">tune_bayes</span><span class="op">(</span></span>
<span>  <span class="va">xgb_workflow</span>,</span>
<span>  resamples <span class="op">=</span> <span class="va">cv_folds</span>,</span>
<span>  param_info <span class="op">=</span> <span class="va">xgb_params</span>,</span>
<span>  initial <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  iter <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  metrics <span class="op">=</span> <span class="fu">metric_set</span><span class="op">(</span><span class="va">rmse</span>, <span class="va">mae</span><span class="op">)</span>,</span>
<span>  control <span class="op">=</span> <span class="fu">control_bayes</span><span class="op">(</span></span>
<span>    verbose_iter <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    save_pred <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    save_workflow <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    uncertain <span class="op">=</span> <span class="fl">5</span>,</span>
<span>    no_improve <span class="op">=</span> <span class="fl">20</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Optimizing rmse using the expected improvement</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 1</span> ─────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1078 (@iter 0)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=621, tree_depth=1, learn_rate=0.0987, mtry=10, min_n=19,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=2.94e-06, sample_size=0.65</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">♥</span> Newest results:  rmse=0.1072 (+/-0.00436)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 2</span> ─────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1072 (@iter 1)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1000, tree_depth=6, learn_rate=0.0423, mtry=11, min_n=26,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=9.13e-06, sample_size=0.804</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1103 (+/-0.00441)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 3</span> ─────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1072 (@iter 1)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1461, tree_depth=4, learn_rate=0.0221, mtry=1, min_n=11,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=5.05e-06, sample_size=0.156</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">♥</span> Newest results:  rmse=0.1033 (+/-0.00473)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 4</span> ─────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1033 (@iter 3)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1786, tree_depth=1, learn_rate=0.00586, mtry=7, min_n=20,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=3.44e-06, sample_size=0.308</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1038 (+/-0.00448)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 5</span> ─────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1033 (@iter 3)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1613, tree_depth=2, learn_rate=0.011, mtry=5, min_n=17,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=1.74e-06, sample_size=0.559</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1044 (+/-0.00437)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 6</span> ─────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1033 (@iter 3)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=671, tree_depth=1, learn_rate=0.0141, mtry=5, min_n=27,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=3.24e-06, sample_size=0.203</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1129 (+/-0.00401)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 7</span> ─────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1033 (@iter 3)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1733, tree_depth=2, learn_rate=0.0493, mtry=8, min_n=22,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=2.27e-05, sample_size=0.507</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1115 (+/-0.00443)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 8</span> ─────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1033 (@iter 3)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1827, tree_depth=13, learn_rate=0.0289, mtry=8, min_n=16,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=4.27e-06, sample_size=0.485</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1118 (+/-0.00393)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 9</span> ─────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1033 (@iter 3)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">?⃝</span> Uncertainty sample</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1513, tree_depth=14, learn_rate=4.22e-09, mtry=7, min_n=40,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=3.39e-10, sample_size=0.863</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.2816 (+/-0.00561)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 10</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1033 (@iter 3)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1828, tree_depth=5, learn_rate=0.0283, mtry=6, min_n=34,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=2.62e-06, sample_size=0.478</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1092 (+/-0.0045)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 11</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1033 (@iter 3)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1278, tree_depth=5, learn_rate=0.0132, mtry=6, min_n=10,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=7.74e-06, sample_size=0.603</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1075 (+/-0.00382)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 12</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1033 (@iter 3)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1977, tree_depth=5, learn_rate=0.0417, mtry=1, min_n=7,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=4.16e-06, sample_size=0.38</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1102 (+/-0.00355)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 13</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1033 (@iter 3)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=37, tree_depth=3, learn_rate=0.0886, mtry=9, min_n=4,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=0.000315, sample_size=0.331</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">♥</span> Newest results:  rmse=0.1028 (+/-0.00397)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 14</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1028 (@iter 13)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=298, tree_depth=2, learn_rate=0.0953, mtry=6, min_n=31,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=1.5e-05, sample_size=0.938</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1067 (+/-0.00467)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 15</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1028 (@iter 13)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1745, tree_depth=5, learn_rate=0.00753, mtry=9, min_n=8,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=0.0015, sample_size=0.77</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1077 (+/-0.00411)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 16</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1028 (@iter 13)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1200, tree_depth=7, learn_rate=0.00656, mtry=6, min_n=11,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=1.21e-10, sample_size=0.249</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">♥</span> Newest results:  rmse=0.1027 (+/-0.00445)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 17</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1027 (@iter 16)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1090, tree_depth=3, learn_rate=0.00819, mtry=10, min_n=6,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=1.49e-10, sample_size=0.751</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1046 (+/-0.00417)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 18</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1027 (@iter 16)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1574, tree_depth=13, learn_rate=0.0056, mtry=10, min_n=11,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=3.21e-10, sample_size=0.61</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1069 (+/-0.00408)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 19</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1027 (@iter 16)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1514, tree_depth=2, learn_rate=0.0232, mtry=9, min_n=7,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=3.92, sample_size=0.247</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.2146 (+/-0.00476)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 20</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1027 (@iter 16)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1558, tree_depth=7, learn_rate=0.044, mtry=3, min_n=27,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=1.13e-10, sample_size=0.687</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1108 (+/-0.00402)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 21</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1027 (@iter 16)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1581, tree_depth=3, learn_rate=0.00782, mtry=4, min_n=11,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=7.2e-05, sample_size=0.914</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1049 (+/-0.00441)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 22</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1027 (@iter 16)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">?⃝</span> Uncertainty sample</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1281, tree_depth=13, learn_rate=5.63e-08, mtry=7, min_n=30,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=3.76e-06, sample_size=0.767</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.2816 (+/-0.00561)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 23</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1027 (@iter 16)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1981, tree_depth=1, learn_rate=0.0132, mtry=5, min_n=24,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=2.15e-10, sample_size=0.123</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1191 (+/-0.00451)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 24</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1027 (@iter 16)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=13, tree_depth=7, learn_rate=0.0135, mtry=9, min_n=18,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=0.000708, sample_size=0.609</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.245 (+/-0.00459)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 25</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1027 (@iter 16)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=173, tree_depth=7, learn_rate=0.0847, mtry=10, min_n=36,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=1.38e-07, sample_size=0.495</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1064 (+/-0.00381)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 26</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1027 (@iter 16)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=438, tree_depth=3, learn_rate=0.0661, mtry=2, min_n=5,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=1.17e-07, sample_size=0.679</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1091 (+/-0.00412)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 27</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1027 (@iter 16)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1231, tree_depth=2, learn_rate=0.033, mtry=3, min_n=13,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=1.89e-10, sample_size=0.255</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1059 (+/-0.00421)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 28</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1027 (@iter 16)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">?⃝</span> Uncertainty sample</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1032, tree_depth=4, learn_rate=3.03e-10, mtry=2, min_n=25,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=6.11, sample_size=0.776</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.2816 (+/-0.00561)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 29</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1027 (@iter 16)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=873, tree_depth=6, learn_rate=0.0115, mtry=5, min_n=31,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=5.31e-08, sample_size=0.297</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1077 (+/-0.00416)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 30</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1027 (@iter 16)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=898, tree_depth=7, learn_rate=0.0809, mtry=4, min_n=3,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=0.00013, sample_size=0.811</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1086 (+/-0.0038)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 31</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1027 (@iter 16)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=747, tree_depth=3, learn_rate=0.063, mtry=8, min_n=35,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=1.62e-08, sample_size=0.969</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1099 (+/-0.00392)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 32</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1027 (@iter 16)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1824, tree_depth=11, learn_rate=0.00575, mtry=6, min_n=38,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=2.01e-07, sample_size=0.369</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1072 (+/-0.00421)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 33</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1027 (@iter 16)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=610, tree_depth=6, learn_rate=0.00522, mtry=8, min_n=29,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=2.11e-06, sample_size=0.994</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1065 (+/-0.00391)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 34</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1027 (@iter 16)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">?⃝</span> Uncertainty sample</span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=1860, tree_depth=14, learn_rate=0.00014, mtry=3, min_n=28,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=1.03e-10, sample_size=0.856</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.2314 (+/-0.00422)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 35</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1027 (@iter 16)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=967, tree_depth=2, learn_rate=0.00454, mtry=8, min_n=5,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=2.07e-05, sample_size=0.12</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.103 (+/-0.00426)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Iteration 36</span> ────────────────────────────────────────────────────────────────</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Current best:       rmse=0.1027 (@iter 16)</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Gaussian process model</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Generating 5000 candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Predicted candidates</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">trees=562, tree_depth=3, learn_rate=0.0069, mtry=4, min_n=40,</span></span></span>
<span><span class="co">#&gt;   <span style="color: #BBBBBB;">loss_reduction=4.23e-07, sample_size=0.342</span></span></span>
<span><span class="co">#&gt; <span style="color: #0000BB;">i</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✓</span> <span style="color: #BBBBBB;">Estimating performance</span></span></span>
<span><span class="co">#&gt; <span style="color: #555555;">ⓧ</span> Newest results:  rmse=0.1111 (+/-0.00376)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> No improvement for 20 iterations; returning current results.</span></span></code></pre></div>
<p>After a few minutes, we can obtain the best parameters from the model
with the lowest RMSE.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">best_params</span> <span class="op">&lt;-</span> <span class="fu">select_best</span><span class="op">(</span><span class="va">tune_results</span>, metric <span class="op">=</span> <span class="st">"rmse"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">best_params</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 8</span></span></span>
<span><span class="co">#&gt;   trees tree_depth learn_rate  mtry min_n loss_reduction sample_size .config</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>  <span style="text-decoration: underline;">1</span>200          7    0.006<span style="text-decoration: underline;">56</span>     6    11       1.21<span style="color: #949494;">e</span><span style="color: #BB0000;">-10</span>       0.249 iter016</span></span></code></pre></div>
<p>We wrap up the modelling by finalising the workflow, fit on the test
data and collect predictions.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">final_xgb_wf</span> <span class="op">&lt;-</span> <span class="fu">finalize_workflow</span><span class="op">(</span><span class="va">xgb_workflow</span>, <span class="va">best_params</span><span class="op">)</span></span>
<span><span class="va">final_fit</span> <span class="op">&lt;-</span> <span class="fu">last_fit</span><span class="op">(</span><span class="va">final_xgb_wf</span>, <span class="va">data_split</span><span class="op">)</span></span>
<span><span class="va">test_predictions</span> <span class="op">&lt;-</span> <span class="fu">collect_predictions</span><span class="op">(</span><span class="va">final_fit</span><span class="op">)</span></span>
<span><span class="va">final_trained_workflow</span> <span class="op">&lt;-</span> <span class="fu">extract_workflow</span><span class="op">(</span><span class="va">final_fit</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="model-diagnostics">Model diagnostics<a class="anchor" aria-label="anchor" href="#model-diagnostics"></a>
</h2>
<p>We can carry out a few checks to investigate the final fit of the
model. First, the test metrics:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">test_metrics</span> <span class="op">&lt;-</span> <span class="fu">collect_metrics</span><span class="op">(</span><span class="va">final_fit</span><span class="op">)</span></span></code></pre></div>
<p>Our RMSE is reasonably low, and the R-squared consequentially high.
We can plot the predicted compactness versus actual compactness to
discover any regions where the model performs better or worse than
expected.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">predicted_vs_actual_plot</span> <span class="op">&lt;-</span> <span class="fu">ggplot</span><span class="op">(</span></span>
<span>  <span class="va">test_predictions</span>,</span>
<span>  <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">compact</span>, y <span class="op">=</span> <span class="va">.pred</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_point</span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span>, color <span class="op">=</span> <span class="st">"dodgerblue"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_abline</span><span class="op">(</span>lty <span class="op">=</span> <span class="fl">2</span>, color <span class="op">=</span> <span class="st">"red"</span>, linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Predicted vs. Actual Compactness on test data"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Actual compactness"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Predicted compactness"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span>base_size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">coord_fixed</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">predicted_vs_actual_plot</span><span class="op">)</span></span></code></pre></div>
<p><img src="DESPLIM-compactness_files/figure-html/predictions-1.png" width="700"></p>
<p>Aside from a couple of outliers, the model predict evenly well across
all compactness scores. Finally, we can check which geographical feature
is the most important in determining compactness:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">train_predictors</span> <span class="op">&lt;-</span> <span class="va">train_data</span> <span class="op">|&gt;</span> <span class="fu">select</span><span class="op">(</span><span class="op">-</span><span class="va">compact</span><span class="op">)</span></span>
<span><span class="va">train_outcome</span> <span class="op">&lt;-</span> <span class="va">train_data</span><span class="op">$</span><span class="va">compact</span></span>
<span><span class="va">explainer</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ModelOriented.github.io/DALEXtra/reference/explain_tidymodels.html" class="external-link">explain_tidymodels</a></span><span class="op">(</span></span>
<span>  <span class="va">final_trained_workflow</span>,</span>
<span>  data <span class="op">=</span> <span class="va">train_predictors</span>,</span>
<span>  y <span class="op">=</span> <span class="va">train_outcome</span>,</span>
<span>  label <span class="op">=</span> <span class="st">"XGBoost"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; Preparation of a new explainer is initiated</span></span>
<span><span class="co">#&gt;   -&gt; model label       :  XGBoost </span></span>
<span><span class="co">#&gt;   -&gt; data              :  445  rows  10  cols </span></span>
<span><span class="co">#&gt;   -&gt; target variable   :  445  values </span></span>
<span><span class="co">#&gt;   -&gt; predict function  :  yhat.workflow  will be used (  default  )</span></span>
<span><span class="co">#&gt;   -&gt; predicted values  :  No value for predict function target column. (  default  )</span></span>
<span><span class="co">#&gt;   -&gt; model_info        :  package tidymodels , ver. 1.4.0 , task regression (  default  ) </span></span>
<span><span class="co">#&gt;   -&gt; predicted values  :  numerical, min =  0.063353 , mean =  0.5173986 , max =  0.9554381  </span></span>
<span><span class="co">#&gt;   -&gt; residual function :  difference between y and yhat (  default  )</span></span>
<span><span class="co">#&gt;   -&gt; residuals         :  numerical, min =  -0.1965148 , mean =  -0.0001375619 , max =  0.3349416  </span></span>
<span><span class="co">#&gt;   A new explainer has been created!</span></span>
<span><span class="va">feature_importance</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://modeloriented.github.io/DALEX/reference/model_parts.html" class="external-link">model_parts</a></span><span class="op">(</span><span class="va">explainer</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">feature_importance</span>, max_vars <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span></span></code></pre></div>
<p><img src="DESPLIM-compactness_files/figure-html/feature-importance-1.png" width="700"></p>
<p>We find that Polsby-Popper and Convex Hull are the most important
features. However, all geographical features plays a role in predicting
the compactness score.</p>
<p>To create a single XGBoost model object, we can extract the fit
engine, to be saved and used for future predictions.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">final_xgb_model_engine</span> <span class="op">&lt;-</span> <span class="fu">extract_fit_engine</span><span class="op">(</span><span class="va">final_trained_workflow</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sixten Maximillian Thestrup.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
