<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Connect a sf LINESTRING object to border nodes of an sf POLYGON object — desplim_connect_border • desplim</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Connect a sf LINESTRING object to border nodes of an sf POLYGON object — desplim_connect_border"><meta name="description" content="Compute the optimal connections between nodes of a sf
LINESTRING object and border nodes of a sf POLYGON object based on user
input."><meta property="og:description" content="Compute the optimal connections between nodes of a sf
LINESTRING object and border nodes of a sf POLYGON object based on user
input."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">desplim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/DESPLIM-compactness.html">Understanding the DESPLIM compactness score</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Connect a <code>sf</code> LINESTRING object to border nodes of an <code>sf</code> POLYGON object</h1>

      <div class="d-none name"><code>desplim_connect_border.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Compute the optimal connections between nodes of a <code>sf</code>
LINESTRING object and border nodes of a <code>sf</code> POLYGON object based on user
input.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">desplim_connect_border</span><span class="op">(</span></span>
<span>  <span class="va">input_linestring</span>,</span>
<span>  <span class="va">input_polygon</span>,</span>
<span>  input_buildings <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  distance_intersect <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  distance_nodes <span class="op">=</span> <span class="fl">250</span>,</span>
<span>  minimum_angle <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  num_candidates <span class="op">=</span> <span class="fl">3</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-input-linestring">input_linestring<a class="anchor" aria-label="anchor" href="#arg-input-linestring"></a></dt>
<dd><p>object of class sf of type LINESTRING or
MULTILINESTRING.</p></dd>


<dt id="arg-input-polygon">input_polygon<a class="anchor" aria-label="anchor" href="#arg-input-polygon"></a></dt>
<dd><p>object of class sf of type POLYGON.</p></dd>


<dt id="arg-input-buildings">input_buildings<a class="anchor" aria-label="anchor" href="#arg-input-buildings"></a></dt>
<dd><p>object of class sf of type POLYGON or MULTIPOLYGON.
Contains elements which should not overlap with output border connetions.
Default is <code>NULL</code>.</p></dd>


<dt id="arg-distance-intersect">distance_intersect<a class="anchor" aria-label="anchor" href="#arg-distance-intersect"></a></dt>
<dd><p>numerical; the minimum distance from exsting
intersections of <code>input_linestring</code> and the border of <code>input_polygon</code> for a
border node of <code>input_polygon</code> to be considered for a new connection. Default
is 500 units.</p></dd>


<dt id="arg-distance-nodes">distance_nodes<a class="anchor" aria-label="anchor" href="#arg-distance-nodes"></a></dt>
<dd><p>numerical; maximum distance from the border nodes of
<code>input_polygon</code> to for a node of <code>input_linestring</code> to be considered for a
new connection. Default is 250 units.</p></dd>


<dt id="arg-minimum-angle">minimum_angle<a class="anchor" aria-label="anchor" href="#arg-minimum-angle"></a></dt>
<dd><p>numerical; minimum angle between a new connection and
the border of <code>input_polygon</code> required for the new connection to be c
onsidered. Default is 30 degrees.</p></dd>


<dt id="arg-num-candidates">num_candidates<a class="anchor" aria-label="anchor" href="#arg-num-candidates"></a></dt>
<dd><p>numerical; number of connections to attempt for each
border node. Default is 3.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An sf object of type LINESTRING connecting nodes in
<code>input_linestring</code> to border nodes of <code>input_polygon</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>For each candidate border node, <code>num_candidates</code> candidate
connections are generated. Only candidate connections which meet the
requirements of <code>minimum_angle</code>, are fully covered by the input polygon and
do not cross any existing linestrings are selected. The border node closest
to an existing intersection is considered first. If more than one valid
connection for the border node is found, the shortest connection is selected
and the set of other candidate border nodes is updated to exclude those who
are within <code>distance_intersect</code> of the new connection. If no valid connection
for the border node exist, the border node is removed from the set of
candidate border nodes.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create input polygon</span></span></span>
<span class="r-in"><span><span class="va">poly_coords</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">0</span>, <span class="fl">10</span>, <span class="fl">0</span>, <span class="fl">16</span>, <span class="fl">3</span>, <span class="fl">10</span>, <span class="fl">10</span>, <span class="fl">0</span>, <span class="fl">10</span>, <span class="op">-</span><span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">0</span>, <span class="fl">0</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ncol <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  byrow <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">input_poly</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">st_sf</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  geometry <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="va">poly_coords</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">32612</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create input linestring</span></span></span>
<span class="r-in"><span><span class="va">line_coords</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">4</span>, <span class="fl">5</span>, <span class="op">-</span><span class="fl">2</span>, <span class="fl">5</span>, <span class="fl">7</span>, <span class="fl">8</span>, <span class="fl">9</span>, <span class="fl">6</span>, <span class="fl">9</span>, <span class="fl">1</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ncol <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  byrow <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">input_line</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">st_sf</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  geometry <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_linestring</a></span><span class="op">(</span><span class="va">line_coords</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">32612</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create input building(s)</span></span></span>
<span class="r-in"><span><span class="va">building_coords</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3</span>, <span class="fl">9</span>, <span class="fl">9</span>, <span class="fl">9</span>, <span class="fl">9</span>, <span class="fl">8.5</span>, <span class="fl">3</span>, <span class="fl">8.5</span>, <span class="fl">3</span>, <span class="fl">9</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ncol <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  byrow <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">input_build</span> <span class="op">&lt;-</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/sf.html" class="external-link">st_sf</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  geometry <span class="op">=</span> <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/sfc.html" class="external-link">st_sfc</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st.html" class="external-link">st_polygon</a></span><span class="op">(</span><span class="va">building_coords</span><span class="op">)</span>, crs <span class="op">=</span> <span class="fl">32612</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Function call</span></span></span>
<span class="r-in"><span><span class="va">border_connections</span> <span class="op">&lt;-</span> <span class="fu">desplim_connect_border</span><span class="op">(</span></span></span>
<span class="r-in"><span>  input_linestring <span class="op">=</span> <span class="va">input_line</span>,</span></span>
<span class="r-in"><span>  input_polygon <span class="op">=</span> <span class="va">input_poly</span>,</span></span>
<span class="r-in"><span>  input_buildings <span class="op">=</span> <span class="va">input_build</span>,</span></span>
<span class="r-in"><span>  distance_intersect <span class="op">=</span> <span class="fl">3</span>, <span class="co"># Small for example</span></span></span>
<span class="r-in"><span>  distance_nodes <span class="op">=</span> <span class="fl">5</span>, <span class="co"># Small for example</span></span></span>
<span class="r-in"><span>  minimum_angle <span class="op">=</span> <span class="fl">30</span>,</span></span>
<span class="r-in"><span>  num_candidates <span class="op">=</span> <span class="fl">3</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Visualisation</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">input_poly</span><span class="op">)</span>, border <span class="op">=</span> <span class="st">'black'</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">input_build</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">'tomato3'</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">input_line</span><span class="op">)</span>, col <span class="op">=</span> <span class="st">'olivedrab'</span>, lwd <span class="op">=</span> <span class="fl">4</span>, add <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu">sf</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_geometry.html" class="external-link">st_geometry</a></span><span class="op">(</span><span class="va">border_connections</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  col <span class="op">=</span> <span class="st">'slateblue3'</span>,</span></span>
<span class="r-in"><span>  lwd <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span>  lty <span class="op">=</span> <span class="fl">2</span>,</span></span>
<span class="r-in"><span>  add <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="desplim_connect_border-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Sixten Maximillian Thestrup.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

